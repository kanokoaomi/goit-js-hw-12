{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nexport const form = document.querySelector('.form');\nexport const listOfImg = document.querySelector('.gallery');\n\nexport const fetchReturn = (inputResult, page) => {\n  return axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '45647419-a95c01b27d6f35f87705f1aeb',\n      q: inputResult,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  });\n};\n","import simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createGallery(pictureInfo) {\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${pictureInfo.largeImageURL}\">\n        <img \n        class=\"gallery-image\"\n        src=\"${pictureInfo.webformatURL}\"\n        data-source=\"${pictureInfo.largeImageURL}\"\n        alt=\"${pictureInfo.tags}\" \n        />\n        <ul class=\"picture-data\">\n      <li class=\"picture-data-item\"><p class=\"picture-data-item-text\"><b>Likes:</b><span class=\"picture-data-item-span\">${pictureInfo.likes}</span></p></li>\n      <li class=\"picture-data-item\"><p class=\"picture-data-item-text\"><b>Views:</b><span class=\"picture-data-item-span\">${pictureInfo.views}</span></p></li>\n      <li class=\"picture-data-item\"><p class=\"picture-data-item-text\"><b>Comments:</b><span class=\"picture-data-item-span\">${pictureInfo.comments}</span></p></li>\n      <li class=\"picture-data-item\"><p class=\"picture-data-item-text\"><b>Downloads:</b><span class=\"picture-data-item-span\">${pictureInfo.downloads}</span></p></li>\n      </ul>\n      </a>\n    </li>\n    `;\n}\n\nexport const listOfImg = document.querySelector('.gallery');\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchReturn, listOfImg, form } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\n\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\nconst postPerPage = 15;\nlet postsNumberQuantity = 0;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nconst renderImages = async event => {\n  event.preventDefault();\n  const inputResult = form.elements.user_search.value.trim();\n  currentPage = 1;\n\n  if (inputResult === '') {\n    iziToast.show({\n      message: 'Please enter a search query!',\n    });\n    return;\n  }\n\n  listOfImg.innerHTML = '';\n\n  showLoader();\n  try {\n    const response = await fetchReturn(inputResult, currentPage);\n    if (response.data.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      const galleryCreating = response.data.hits\n        .map(imgInfo => createGallery(imgInfo))\n        .join('');\n      listOfImg.innerHTML = galleryCreating;\n      lightbox.refresh();\n      hideLoader();\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (err) {\n    hideLoader();\n    iziToast.show({\n      message: 'Sorry, there is an issue. Please try again!',\n    });\n    form.reset();\n    console.log(err);\n  }\n};\n\nconst loader = document.querySelector('.loader');\nconst showLoader = () => {\n  loader.style.display = 'block';\n};\nconst hideLoader = () => {\n  loader.style.display = 'none';\n};\n\nform.addEventListener('submit', renderImages);\n\nconst loadMoreListener = async event => {\n  try {\n    currentPage++;\n    const inputResult = form.elements.user_search.value.trim();\n    const response = await fetchReturn(inputResult, currentPage);\n\n    const galleryCreating = response.data.hits\n      .map(imgInfo => createGallery(imgInfo))\n      .join('');\n    listOfImg.insertAdjacentHTML('beforeend', galleryCreating);\n    lightbox.refresh();\n    smoothScroll();\n\n    postsNumberQuantity += postPerPage;\n\n    if (postsNumberQuantity >= response.data.totalHits) {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtn.classList.add('is-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nloadMoreBtn.addEventListener('click', loadMoreListener);\n"],"names":["form","listOfImg","fetchReturn","inputResult","page","axios","createGallery","pictureInfo","loadMoreBtn","currentPage","postPerPage","postsNumberQuantity","lightbox","SimpleLightbox","smoothScroll","cardHeight","renderImages","event","iziToast","showLoader","response","galleryCreating","imgInfo","hideLoader","err","loader","loadMoreListener","error"],"mappings":"+vBAIO,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAY,SAAS,cAAc,UAAU,EAE7CC,EAAc,CAACC,EAAaC,IAChCC,EAAM,IAAI,2BAA4B,CAC3C,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACP,CACL,CAAG,ECfI,SAASE,EAAcC,EAAa,CACzC,MAAO;AAAA;AAAA,sCAE6BA,EAAY,aAAa;AAAA;AAAA;AAAA,eAGhDA,EAAY,YAAY;AAAA,uBAChBA,EAAY,aAAa;AAAA,eACjCA,EAAY,IAAI;AAAA;AAAA;AAAA,0HAG2FA,EAAY,KAAK;AAAA,0HACjBA,EAAY,KAAK;AAAA,6HACdA,EAAY,QAAQ;AAAA,8HACnBA,EAAY,SAAS;AAAA;AAAA;AAAA;AAAA,KAKnJ,CAEyB,SAAS,cAAc,UAAU,EChB1D,MAAMC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAc,EAClB,MAAMC,EAAc,GACpB,IAAIC,EAAsB,EAE1B,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASC,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAEA,MAAMC,EAAe,MAAMC,GAAS,CAClCA,EAAM,eAAc,EACpB,MAAMd,EAAcH,EAAK,SAAS,YAAY,MAAM,OAGpD,GAFAS,EAAc,EAEVN,IAAgB,GAAI,CACtBe,EAAS,KAAK,CACZ,QAAS,8BACf,CAAK,EACD,MACD,CAEDjB,EAAU,UAAY,GAEtBkB,IACA,GAAI,CACF,MAAMC,EAAW,MAAMlB,EAAYC,EAAaM,CAAW,EAC3D,GAAIW,EAAS,KAAK,KAAK,SAAW,EAChCF,EAAS,KAAK,CACZ,QACE,0EACV,CAAO,MACI,CACL,MAAMG,EAAkBD,EAAS,KAAK,KACnC,IAAIE,GAAWhB,EAAcgB,CAAO,CAAC,EACrC,KAAK,EAAE,EACVrB,EAAU,UAAYoB,EACtBT,EAAS,QAAO,EAChBW,IACAf,EAAY,UAAU,OAAO,WAAW,CACzC,CACF,OAAQgB,EAAK,CACZD,IACAL,EAAS,KAAK,CACZ,QAAS,6CACf,CAAK,EACDlB,EAAK,MAAK,EACV,QAAQ,IAAIwB,CAAG,CAChB,CACH,EAEMC,EAAS,SAAS,cAAc,SAAS,EACzCN,EAAa,IAAM,CACvBM,EAAO,MAAM,QAAU,OACzB,EACMF,EAAa,IAAM,CACvBE,EAAO,MAAM,QAAU,MACzB,EAEAzB,EAAK,iBAAiB,SAAUgB,CAAY,EAE5C,MAAMU,EAAmB,MAAMT,GAAS,CACtC,GAAI,CACFR,IACA,MAAMN,EAAcH,EAAK,SAAS,YAAY,MAAM,OAC9CoB,EAAW,MAAMlB,EAAYC,EAAaM,CAAW,EAErDY,EAAkBD,EAAS,KAAK,KACnC,IAAIE,GAAWhB,EAAcgB,CAAO,CAAC,EACrC,KAAK,EAAE,EACVrB,EAAU,mBAAmB,YAAaoB,CAAe,EACzDT,EAAS,QAAO,EAChBE,IAEAH,GAAuBD,EAEnBC,GAAuBS,EAAS,KAAK,YACvCF,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EACDV,EAAY,UAAU,IAAI,WAAW,EAExC,OAAQmB,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEAnB,EAAY,iBAAiB,QAASkB,CAAgB"}